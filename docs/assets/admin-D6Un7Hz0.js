import"./version-BKoZn0Lf.js";import{t as g,j as f,d as o,c as A,w as U,g as b,p as l,e as S,k as w,x as y,y as s,z as C,A as R,B as v,C as E,D as j,E as I,s as m}from"./auth-handler-CbhqdzIw.js";import{a as M,w as c}from"./adminNavItems-u5BZOrdS.js";let i=document.getElementById("adminHomeApp");const e={current:i};let r=!1,d=null;const k=a=>{if(!(a!=null&&a.email))return null;const n=a.photoURL?I({class:"user-avatar-image",src:a.photoURL,alt:a.email,referrerPolicy:"no-referrer"}):m.class`user-avatar-fallback`((a.email||"?")[0].toUpperCase());return o.class`user-badge`(n,m.class`user-email`(a.email))},u=()=>U().catch(a=>{console.error("Firebase sign-out failed",a),s.error("Sign out failed. Try again.")}),F=g(()=>[f.class`admin-home`(o.class`admin-home-top`(k(d),A.type`button`.class`menu-button admin-home-signout`.onClick(u)("ðŸšª Sign out")),o.class`admin-home-header`(b("Admin Home"),l("Choose an admin area to get started.")),o.class`admin-home-grid`(...M.map(a=>S.class`panel admin-home-card`.href(a.href)(o.class`admin-home-emoji`(a.emoji),w(c(a.label)),l(c(a.details))))))]),H=()=>{if(!e.current||r)return;const a=E(e);a&&(a.replaceChildren(),j(F,a),r=!0,i=e.current)},p=(a,n,h="")=>{e.current&&(C({rootRef:e,status:a,userEmail:n,adminEmail:"",onSignIn:()=>R().catch(t=>{console.error("Firebase sign-in failed",t),s.error("Sign in failed. Try again.")}),onSignOut:u,setAppMounted:t=>{r=t}}),i=e.current)};p("loading","","initial");const O=async(a,n="")=>{await v({user:a,mountSso:p,toast:s,setCurrentUser:t=>{d=t},onAuthorized:()=>{H()},reason:n})};y({onUser:O,toast:s});
