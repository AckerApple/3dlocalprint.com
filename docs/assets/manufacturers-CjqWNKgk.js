import{t as S,S as y,J as C,F as k,D as w,E as I,j as s,I as g,v as h,q as c,K as R,L as E,U as F,M as O,N,O as U,T as v,P as z,Q as L,R as P}from"./ssoMount-CdZ2rzdq.js";/* empty css               */let f=document.getElementById("manufacturersApp");const n={current:f},a=g.map(e=>e);let u="";const j=N[0];let r=null,l=!1,i=!1;const M=()=>{n.current&&(n.current.replaceChildren(),v(A,n.current))},q=()=>{const e=u.trim();e&&(a.push(e),u="",M())},x=e=>{a.splice(e,1),M()},B=()=>{F(a.map(e=>e)).catch(e=>{console.error("Failed to save manufacturers",e),alert("Save failed. Check the console for details.")})},b=()=>C().catch(e=>{console.error("Firebase sign-out failed",e),alert("Sign out failed. Check the console for details.")}),A=S(()=>[y(b),k.class`panel manufacturers-panel`(w("Manage Manufacturers"),I("Update the list used by the swatch editor and add new entries."),s.class`manufacturer-list`(...a.map((e,t)=>s.class`manufacturer-row`(h({class:"manufacturer-input",type:"text",value:()=>a[t]??"",onInput:p=>{a[t]=p.target.value}}),c({type:"button",class:"ghost-button",onClick:()=>x(t)},"Remove")))),s.class`manufacturer-add`(h({class:"manufacturer-input",type:"text",placeholder:"New manufacturer",value:()=>u,onInput:e=>{u=e.target.value}}),c({type:"button",class:"add-button",onClick:q},"âž• Add manufacturer")),s.class`auth-actions`(c({type:"button",class:"add-button",onClick:B},"ðŸ’¾ Save to Firestore")))]),m=(e="")=>{if(!n.current||i)return;const t=P(n);t&&(t.replaceChildren(),v(A,t),i=!0,f=n.current)},d=(e,t,p="")=>{n.current&&(O({rootRef:n,status:e,userEmail:t,adminEmail:j,onSignIn:()=>U().catch(o=>{console.error("Firebase sign-in failed",o),alert("Sign in failed. Check the console for details.")}),onSignOut:b,setAppMounted:o=>{i=o}}),f=n.current)};d("loading","","initial");R();E(e=>{if(l=!1,!e){r&&(r(),r=null),d("login","","auth:logged-out");return}if(!z(e)){r&&(r(),r=null),d("denied",e.email||"","auth:denied");return}l=!0,r||(r=L(t=>{Array.isArray(t)&&t.length?a.splice(0,a.length,...t):a.splice(0,a.length,...g),l&&m("manufacturers:update")})),m("auth:authorized")});
