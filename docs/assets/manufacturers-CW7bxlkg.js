import{t as A,S as w,J as C,F,D as E,E as I,j as i,I as y,v as g,q as f,K as u,L as R,O as k,M as T,N as O,T as v,P as U,Q as N,R as z,U as L}from"./toast-DaPRlz4a.js";/* empty css               */let m=document.getElementById("manufacturersApp");const n={current:m},t=y.map(e=>e);let d="",s=null,c=!1,p=!1;const b=()=>{n.current&&(n.current.replaceChildren(),v(S,n.current))},P=()=>{const e=d.trim();e&&(t.push(e),d="",b())},j=e=>{t.splice(e,1),b()},q=async()=>{if(!c){u.error("Sign in to save changes.");return}try{await L(t.map(e=>e)),u.success("Manufacturers saved.")}catch(e){console.error("Failed to save manufacturers",e),u.error("Save failed. Try again.")}},M=()=>C().catch(e=>{console.error("Firebase sign-out failed",e),u.error("Sign out failed. Try again.")}),S=A(()=>[w(M),F.class`panel manufacturers-panel`(E("Manage Manufacturers"),I("Update the list used by the swatch editor and add new entries."),i.class`manufacturer-list`(...t.map((e,a)=>i.class`manufacturer-row`(g({class:"manufacturer-input",type:"text",value:()=>t[a]??"",onInput:o=>{t[a]=o.target.value}}),f({type:"button",class:"ghost-button",onClick:()=>j(a)},"Remove")))),i.class`manufacturer-add`(g({class:"manufacturer-input",type:"text",placeholder:"New manufacturer",value:()=>d,onInput:e=>{d=e.target.value}}),f({type:"button",class:"add-button",onClick:P},"âž• Add manufacturer")),i.class`auth-actions`(f({type:"button",class:"add-button",onClick:q},"ðŸ’¾ Save to Firestore")))]),h=()=>{if(!n.current||p)return;const e=z(n);e&&(e.replaceChildren(),v(S,e),p=!0,m=n.current)},l=(e,a,o="")=>{n.current&&(R({rootRef:n,status:e,userEmail:a,adminEmail:"",onSignIn:()=>k().catch(r=>{console.error("Firebase sign-in failed",r),u.error("Sign in failed. Try again.")}),onSignOut:M,setAppMounted:r=>{p=r}}),m=n.current)};l("loading","","initial");const x=async()=>{const{redirectError:e}=await T();e&&u.error("Sign-in failed after redirect. Try again."),O(async a=>{if(c=!1,!a){s&&(s(),s=null),l("login","","auth:logged-out");return}let o=!1;try{o=await U(a.email||"")}catch(r){console.error("Failed to load admin list",r),u.error("Unable to verify access. Check Firestore rules."),l("denied",a.email||"","auth:permissions");return}if(!o){s&&(s(),s=null),u.error(`Signed in as ${a.email||"unknown"} but not authorized.`),l("denied",a.email||"","auth:denied");return}c=!0,s||(s=N(r=>{Array.isArray(r)&&r.length?t.splice(0,t.length,...r):t.splice(0,t.length,...y),c&&h()})),h()})};x();
