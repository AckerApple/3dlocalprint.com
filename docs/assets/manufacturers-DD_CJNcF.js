import{t as A,S as y,J as C,F as k,D as w,E as I,j as s,I as g,v as m,q as c,K as R,T as E,L as F,M as O,N,R as v,O as z,P as L,Q as P}from"./ssoMount-CJ6ITNMd.js";/* empty css               */let f=document.getElementById("manufacturersApp");const n={current:f},a=g.map(e=>e);let u="";const U=O[0];let r=null,l=!1,i=!1;const M=()=>{n.current&&(n.current.replaceChildren(),v(S,n.current))},j=()=>{const e=u.trim();e&&(a.push(e),u="",M())},q=e=>{a.splice(e,1),M()},x=()=>{E(a.map(e=>e)).catch(e=>{console.error("Failed to save manufacturers",e),alert("Save failed. Check the console for details.")})},b=()=>C().catch(e=>{console.error("Firebase sign-out failed",e),alert("Sign out failed. Check the console for details.")}),S=A(()=>[y(b),k.class`panel manufacturers-panel`(w("Manage Manufacturers"),I("Update the list used by the swatch editor and add new entries."),s.class`manufacturer-list`(...a.map((e,t)=>s.class`manufacturer-row`(m({class:"manufacturer-input",type:"text",value:()=>a[t]??"",onInput:p=>{a[t]=p.target.value}}),c({type:"button",class:"ghost-button",onClick:()=>q(t)},"Remove")))),s.class`manufacturer-add`(m({class:"manufacturer-input",type:"text",placeholder:"New manufacturer",value:()=>u,onInput:e=>{u=e.target.value}}),c({type:"button",class:"add-button",onClick:j},"âž• Add manufacturer")),s.class`auth-actions`(c({type:"button",class:"add-button",onClick:x},"ðŸ’¾ Save to Firestore")))]),h=(e="")=>{if(!n.current||i)return;const t=P(n);t&&(t.replaceChildren(),v(S,t),i=!0,f=n.current)},d=(e,t,p="")=>{n.current&&(F({rootRef:n,status:e,userEmail:t,adminEmail:U,onSignIn:()=>N().catch(o=>{console.error("Firebase sign-in failed",o),alert("Sign in failed. Check the console for details.")}),onSignOut:b,setAppMounted:o=>{i=o}}),f=n.current)};d("loading","","initial");R(e=>{if(l=!1,!e){r&&(r(),r=null),d("login","","auth:logged-out");return}if(!z(e)){r&&(r(),r=null),d("denied",e.email||"","auth:denied");return}l=!0,r||(r=L(t=>{Array.isArray(t)&&t.length?a.splice(0,a.length,...t):a.splice(0,a.length,...g),l&&h("manufacturers:update")})),h("auth:authorized")});
