import"./version-JERxWKPc.js";import{t as w,w as U,j as C,g as F,p as I,d as o,i as m,c as f,x as R,y as u,z as k,A as O,B as x,U as z,D as h,C as B,X as D}from"./auth-handler-CUxa3Sdo.js";import{A as E}from"./AdminNav.tag-BwAcyMET.js";import"./adminNavItems-DuM74EKO.js";const y=["Bambu","PolyMaker","Hatchbox","3DHoJor"];let d=document.getElementById("manufacturersApp");const r={current:d},t=y.map(e=>e);let i="",n=null,c=!1,p=!1,A=null;const v=()=>{r.current&&(r.current.replaceChildren(),h(M,r.current))},T=()=>{const e=i.trim();e&&(t.push(e),i="",v())},H=e=>{t.splice(e,1),v()},N=async()=>{if(!c){u.error("Sign in to save changes.");return}try{await D(t.map(e=>e)),u.success("ðŸ­ Manufacturers saved.")}catch(e){console.error("Failed to save ðŸ­ manufacturers",e),u.error("Save failed. Try again.")}},b=()=>U().catch(e=>{console.error("Firebase sign-out failed",e),u.error("Sign out failed. Try again.")}),M=w(()=>[E(b,A),C.class`panel manufacturers-panel`(F("ðŸ­ Manage Filament Manufacturers"),I("Update the list used by the filament inventory and add new entries."),o.class`manufacturer-list`(...t.map((e,s)=>o.class`manufacturer-row`(m({class:"manufacturer-input",type:"text",value:()=>t[s]??"",onInput:l=>{t[s]=l.target.value}}),f({type:"button",class:"ghost-button",onClick:()=>H(s)},"Remove")))),o.class`manufacturer-add`(m({class:"manufacturer-input",type:"text",placeholder:"New ðŸ­ manufacturer",value:()=>i,onInput:e=>{i=e.target.value}}),f({type:"button",class:"add-button",onClick:T},"âž• Add ðŸ­ manufacturer")),o.class`auth-actions`(f({type:"button",class:"add-button",onClick:N},"ðŸ’¾ Save to Firestore")))]),g=()=>{if(!r.current||p)return;const e=B(r);e&&(e.replaceChildren(),h(M,e),p=!0,d=r.current)},S=(e,s,l="")=>{r.current&&(k({rootRef:r,status:e,userEmail:s,adminEmail:"",onSignIn:()=>O().catch(a=>{console.error("Firebase sign-in failed",a),u.error("Sign in failed. Try again.")}),onSignOut:b,setAppMounted:a=>{p=a}}),d=r.current)};S("loading","","initial");const P=async(e,s="")=>{c=!1,await x({user:e,mountSso:S,toast:u,setCurrentUser:a=>{A=a},onSignedOut:()=>{n&&(n(),n=null)},onDenied:()=>{n&&(n(),n=null)},onAuthorized:()=>{c=!0,n||(n=z(a=>{Array.isArray(a)&&a.length?t.splice(0,t.length,...a):t.splice(0,t.length,...y),c&&g()})),g()},reason:s})};R({onUser:P,toast:u});
